<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heroncraft Tasks - Gerenciador de Tarefas</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* (Mantenha todos os estilos anteriores) */
        
        /* Adicione este novo estilo */
        .view-switcher {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .view-switcher button {
            padding: 8px 16px;
            background: #f0f0f0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .view-switcher button.active {
            background: #ff0000;
            color: white;
        }
    </style>
</head>
<body>
    <!-- (Mantenha todo o HTML anterior até o tasks-container) -->
    
    <div class="tasks-container">
        <h2>SUAS TAREFAS</h2>
        <div class="view-switcher">
            <button id="viewAllBtn" class="active">Todas Tarefas</button>
            <button id="viewAssignedBtn">Atribuídas a Mim</button>
        </div>
        <ul id="taskList" class="task-list">
            <!-- Tarefas serão inseridas aqui -->
        </ul>
    </div>

    <script>
        // (Mantenha todo o código JS anterior até a função renderTasks)
        
        // Modifique a função renderTasks para incluir filtro
        function renderTasks(view = 'all') {
            if (!currentUser) return;
            
            let tasks = users[currentUser]?.tasks || [];
            
            // Se for a visualização do responsável, filtrar tarefas
            if (view === 'assigned') {
                tasks = getAllTasks().filter(task => task.assignee === currentUser);
            }
            
            taskList.innerHTML = '';
            
            if (tasks.length === 0) {
                taskList.innerHTML = `
                    <li class="no-tasks">
                        <i class="fas fa-tasks"></i>
                        <p>Nenhuma tarefa encontrada</p>
                        <p>${view === 'assigned' ? 'Nenhuma tarefa atribuída a você!' : 'Crie sua primeira tarefa!'}</p>
                    </li>
                `;
                return;
            }
            
            tasks.forEach(task => {
                const taskElement = document.createElement('li');
                taskElement.className = 'task-item';
                taskElement.innerHTML = `
                    <div class="task-header">
                        <div class="task-title">${task.title}</div>
                        <div class="task-date">${formatDate(task.date)}</div>
                    </div>
                    <div class="task-meta">
                        <div class="task-creator"><i class="fas fa-user-edit"></i> Criado por: ${task.createdBy}</div>
                        <div class="task-assignee"><i class="fas fa-user-check"></i> Responsável: ${task.assignee}</div>
                    </div>
                    <div class="task-description">${task.description || 'Sem descrição fornecida'}</div>
                    ${task.createdBy === currentUser ? 
                      `<div class="task-actions">
                          <button class="btn btn-danger delete-btn" data-id="${task.id}"><i class="fas fa-trash-alt"></i> EXCLUIR</button>
                      </div>` : ''}
                `;
                taskList.appendChild(taskElement);
            });
            
            // Adicionar event listeners aos botões de exclusão
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const taskId = e.target.dataset.id;
                    deleteTask(taskId);
                });
            });
        }
        
        // Função para pegar todas as tarefas de todos os usuários
        function getAllTasks() {
            let allTasks = [];
            for (const user in users) {
                allTasks = allTasks.concat(users[user].tasks);
            }
            return allTasks;
        }
        
        // Event listeners para os botões de visualização
        document.getElementById('viewAllBtn').addEventListener('click', () => {
            document.getElementById('viewAllBtn').classList.add('active');
            document.getElementById('viewAssignedBtn').classList.remove('active');
            renderTasks('all');
        });
        
        document.getElementById('viewAssignedBtn').addEventListener('click', () => {
            document.getElementById('viewAssignedBtn').classList.add('active');
            document.getElementById('viewAllBtn').classList.remove('active');
            renderTasks('assigned');
        });
        
        // (Mantenha o resto do código JS)
    </script>
</body>
</html>
